angular.module("mobile-navigate",[]),angular.module("mobile-navigate").factory("$change",["$q","$timeout",function(e,t){var n={modal:["modal",""],none:["",""]},r={prefix:"mb-"},i="in",s="out",o="reverse",u="webkitAnimationEnd";return function(f,l,c,h,p){function g(e){var t="";for(var n=0,r=e.length;n<r;n++)e[n].length&&(t+=" mb-"+e[n]);return t}function y(e,t){e&&e.addClass(g(t))}function b(e,t){e&&e.removeClass(g(t))}function S(){l&&l.css("z-index",0),t(d.resolve)}p=angular.extend(p||{},r);var d=e.defer(),v,m;transition=n[c]?n[c]:[c,c];var w=[],E=[];w.push(h?s:i),w.push(v=transition[h?1:0]),h&&w.push(o),E.push(h?i:s),E.push(m=transition[h?0:1]),h&&E.push(o),y(f,w),y(l,E);var x;return v&&v.length?(x=f).bind(u,S):l&&m&&m.length?(x=l).bind(u,S):d.resolve(),d.promise.then(function(){x&&x.unbind(u,S),b(l,E),b(f,w)}),d.promise.cancel=function(){d.resolve()},d.promise}}]),angular.module("mobile-navigate").service("$navigate",["$rootScope","$location",function(e,t){function i(e,t){this.path=e,this.transition=t||"slide"}function s(t,r,i){e.$broadcast("$pageTransitionStart",t,r,i),n.current=n.next}var n=this,r=[];n.onRouteSuccess=angular.noop,e.$on("$routeChangeSuccess",function(){n.onRouteSuccess()}),n.go=function(o,u){t.path(o),n.onRouteSuccess=function(){n.current&&r.push(n.current),n.next=new i(o,u),s(n.next,n.current,!1)}},n.eraseHistory=function(){r.length=0},n.back=function(){if(r.length>0){var e=r[r.length-1];return t.path(e.path),n.onRouteSuccess=function(){r.pop(),n.next=e,s(n.next,n.current,!0)},!0}return!1},(window.cordova||window.phonegap)&&window.device&&device.platform&&device.platform.toLowerCase()=="android"&&document.addEventListener("deviceready",function(){document.addEventListener("backbutton",function(){var e=n.back();e||navigator.app.exitApp()})})}]),angular.module("mobile-navigate").directive("mobileView",["$rootScope","$compile","$controller","$route","$change",function(e,t,n,r,i){function s(s,o,u){function a(e){var i=r.current,a=i&&i.locals;e.element=angular.element(document.createElement("div")),e.element.html(a.$template),e.element.addClass("mb-page"),e.scope=s.$new(),i.controller&&(a.$scope=e.scope,e.controller=n(i.controller,a),e.element.contents().data("$ngControllerController",e.controller)),t(e.element.contents())(e.scope),o.append(e.element),e.scope.$emit("$viewContentLoaded"),e.scope.$eval(u.onLoad)}var f;s.$on("$pageTransitionStart",function(n,r,s,o){function u(){a(r);var t=i(r.element,s?s.element:null,o?s.transition:r.transition,o);return t.then(function(){s&&(e.$broadcast("$pageTransitionSuccess",r,s),s.scope.$destroy(),s.element.remove(),s=undefined)}),t}f&&f.cancel(),f=u(r,s,o)})}return{restrict:"EA",link:s}}]);