angular.module("mobile-navigate",[]),angular.module("mobile-navigate").factory("$change",["$q","$timeout",function(e,t){var n={modal:["modal",""],none:["",""]},r={prefix:"mb-"},i="in",s="out",o="shown";return function(a,f,l,c,h){function y(e,t){e&&e.addClass(h.prefix+t)}function b(e,t){e&&e.removeClass(h.prefix+t)}function w(){t(p.resolve)}h=angular.extend(h||{},r);var p=e.defer(),d,v,m,g;transition=n[l]?n[l]:[l,l],d=c?s:i,v=c?i:s,m=transition[c?1:0],g=transition[c?0:1],y(a,d),y(a,m),y(f,g),setTimeout(function(){b(a,d),y(a,o),b(f,o),y(f,v)},30);var E;return m&&m.length?(E=a).bind("webkitTransitionEnd",w):f&&g&&g.length?(E=f).bind("webkitTransitionEnd",w):p.resolve(),p.promise.then(function(){E&&E.unbind("webkitTransitionEnd",w),b(a,m),b(f,g)}),p.promise.cancel=function(){p.resolve()},p.promise}}]),angular.module("mobile-navigate").service("$navigate",["$rootScope","$location",function(e,t){function i(e,t){this.path=e,this.transition=t||"slide"}function s(t,r,i){e.$broadcast("$pageTransitionStart",t,r,i),n.current=n.next}var n=this,r=[];n.onRouteSuccess=angular.noop,e.$on("$routeChangeSuccess",function(){n.onRouteSuccess()}),n.go=function(o,u){t.path(o),n.onRouteSuccess=function(){n.current&&r.push(n.current),n.next=new i(o,u),s(n.next,n.current,!1)}},n.eraseHistory=function(){r.length=0},n.back=function(){if(r.length>0){var e=r[r.length-1];return t.path(e.path),n.onRouteSuccess=function(){r.pop(),n.next=e,s(n.next,n.current,!0)},!0}return!1},(window.cordova||window.phonegap)&&window.device&&device.platform&&device.platform.toLowerCase()=="android"&&document.addEventListener("deviceready",function(){document.addEventListener("backbutton",function(){var e=n.back();e||navigator.app.exitApp()})})}]),angular.module("mobile-navigate").directive("mobileView",["$rootScope","$compile","$controller","$route","$change",function(e,t,n,r,i){function s(s,o,u){function a(e){var i=r.current,a=i&&i.locals;e.element=angular.element(document.createElement("div")),e.element.html(a.$template),e.element.addClass("mb-page"),e.scope=s.$new(),i.controller&&(a.$scope=e.scope,e.controller=n(i.controller,a),e.element.contents().data("$ngControllerController",e.controller)),t(e.element.contents())(e.scope),o.append(e.element),e.scope.$emit("$viewContentLoaded"),e.scope.$eval(u.onLoad)}function f(e){}function l(e,t,n){}var c;s.$on("$pageTransitionStart",function(n,r,s,o){function u(){var t;return a(r),t=i(r.element,s?s.element:null,o?s.transition:r.transition,o),t.then(function(){s&&(e.$broadcast("$pageTransitionSuccess",r,s),s.scope.$destroy(),s.element.remove(),s=undefined)}),t}c&&c.cancel(),c=u(r,s,o)})}return{restrict:"EA",link:s}}]);