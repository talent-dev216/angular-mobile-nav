/*
 * angular-mobile-nav by Andy Joslin
 * http://github.com/ajoslin/angular-mobile-nav
 * @license MIT License http://goo.gl/Z8Nlo
 */angular.module("mobile-navigate",[]),angular.module("mobile-navigate").factory("$change",["$q","$rootScope",function(e,t){var n={modal:["modal",""],none:["",""]},r={prefix:"mb-"},i="in",s="out",o="reverse",u="done",a="webkitAnimationEnd";return function(f,l,c,h,p){function g(e){var t="";for(var n=0,r=e.length;n<r;n++)e[n].length&&(t+=" "+p.prefix+e[n]);return t}function w(){t.$apply(function(){d.resolve()})}p=angular.extend(p||{},r);var d=e.defer(),v,m;transition=n[c]?n[c]:[c,c],f.css("z-index","-100"),f[0].offsetWidth+=0;var y=g([h?s:i,v=transition[h?1:0],h&&o||""]);f.addClass(y);var b;l&&(b=g([h?i:s,m=transition[h?0:1],h&&o||""]),l.addClass(b)),f.css("z-index",""),f[0].offsetWidth+=0;var E;return v&&v.length?(E=f).bind(a,w):l&&m&&m.length?(E=l).bind(a,w):d.resolve(),d.promise.then(function(){E&&E.unbind(a,w),f.removeClass(y),l&&l.removeClass(b)}),d.promise.cancel=function(){d.resolve()},d.promise}}]),angular.module("mobile-navigate").service("$navigate",["$rootScope","$location",function(e,t){function i(e,t){this.path=e,this.transition=t||"slide"}function s(t,r,i){e.$broadcast("$pageTransitionStart",t,r,i),n.current=n.next}var n=this,r=[];n.onRouteSuccess=angular.noop,e.$on("$routeChangeSuccess",function(e,t,r){n.onRouteSuccess(e,t,r)}),n.go=function(o,u){t.path(o),n.onRouteSuccess=function(e,t,a){n.current&&r.push(n.current),n.next=new i(o,u||t.$route.transition),s(n.next,n.current,!1)}},n.eraseHistory=function(){r.length=0},n.back=function(){if(r.length>0){var e=r[r.length-1];return t.path(e.path),n.onRouteSuccess=function(){r.pop(),n.next=e,s(n.next,n.current,!0)},!0}return!1},(window.cordova||window.phonegap)&&window.device&&device.platform&&device.platform.toLowerCase()=="android"&&document.addEventListener("deviceready",function(){document.addEventListener("backbutton",function(){var e=n.back();e||navigator.app.exitApp()})})}]),angular.module("mobile-navigate").directive("mobileView",["$rootScope","$compile","$controller","$route","$change",function(e,t,n,r,i){function s(s,o,u){function a(e){var i=r.current,a=i&&i.locals;e.element=angular.element(document.createElement("div")),e.element.html(a.$template),e.element.addClass("mb-page"),e.scope=s.$new(),i.controller&&(a.$scope=e.scope,e.controller=n(i.controller,a),e.element.contents().data("$ngControllerController",e.controller)),t(e.element.contents())(e.scope),o.append(e.element),e.scope.$emit("$viewContentLoaded"),e.scope.$eval(u.onLoad)}var f;s.$on("$pageTransitionStart",function(n,r,s,o){function u(){a(r);var t=i(r.element,s?s.element:null,o?s.transition:r.transition,o);return t.then(function(){s&&(e.$broadcast("$pageTransitionSuccess",r,s),s.scope.$destroy(),s.element.remove(),s=undefined)}),t}f&&f.cancel(),f=u(r,s,o)})}return{restrict:"EA",link:s}}]);